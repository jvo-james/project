<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>MushRush — Landing / Referral Card</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-900:#04040a;
    --panel:#0b0b10;
    --muted:rgba(255,255,255,0.64);
    --muted-2:rgba(255,255,255,0.36);
    --purple-600:#6b21a8;
    --purple-400:#a78bfa;
    --accent:#8b5cf6;
    --teal:#00c2a8;
    --glass:rgba(255,255,255,0.03);
    --card-radius:12px;
    --shadow: 0 8px 28px rgba(6,8,20,0.6);
  }

  html,body{height:100%;margin:0;background:linear-gradient(180deg,#02020a 0%, #06030b 100%);color:#f3f7ff;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto;overflow:hidden}
  body::before{content:"";position:fixed;inset:0;pointer-events:none;background-image:radial-gradient(rgba(255,255,255,0.006) 1px, transparent 1px);background-size:6px 6px;mix-blend-mode:overlay;opacity:.6}

  .stage-wrap{width:1200px;height:720px;margin:0 auto;transform-origin:top left}
  .stage{display:grid;grid-template-columns:520px 1fr;gap:28px;height:100%;padding:22px;box-sizing:border-box}

  .panel{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid var(--glass);box-shadow:var(--shadow)}

  .topbar{display:flex;align-items:center;gap:12px;height:48px}
  .logo{width:54px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--purple-600),var(--purple-400));display:flex;align-items:center;justify-content:center;font-weight:800;color:white}
  .title{font-weight:700;font-size:16px}
  .subtitle{font-size:12px;color:var(--muted-2)}

  .left{display:flex;flex-direction:column;gap:14px}
  .welcome{font-family:Space Mono, monospace;font-weight:700;letter-spacing:1px;color:#fff}
  .code-large{font-family:Space Mono, monospace;font-size:36px;letter-spacing:2px;margin-top:6px;color:var(--purple-400)}
  .muted{color:var(--muted);font-size:13px}

  .ref-section{display:flex;flex-direction:column;gap:8px}
  .ref-row{display:flex;gap:10px;align-items:center}
  .ref-code{font-family:Space Mono,monospace;padding:12px 14px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.03);font-weight:700;color:var(--teal);font-size:18px}
  .input{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}

  .cta-list{display:flex;flex-direction:column;gap:12px;margin-top:10px}
  .btn{padding:12px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer}
  .btn-primary{background:linear-gradient(90deg,var(--purple-600),var(--purple-400));color:white;box-shadow:0 8px 20px rgba(107,33,168,0.12)}
  .btn-secondary{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:var(--muted)}
  .btn-cta{background:linear-gradient(90deg,#ff6fcf,#7c3aed);color:white}

  .small{font-size:12px;color:var(--muted-2)}

  .right{display:flex;flex-direction:column;align-items:flex-end}
  .card-wrap{width:440px}
  .rainbow-border{padding:6px;border-radius:14px;background:linear-gradient(135deg,#a78bfa,#7c3aed,#ff6fcf,#6ee7b7)}
  .player-card{background:linear-gradient(180deg,#0b0a0f, rgba(255,255,255,0.01));border-radius:10px;padding:12px;color:var(--muted)}

  .avatar{height:360px;border-radius:8px;background-size:cover;background-position:center;border:1px solid rgba(255,255,255,0.03);box-shadow:0 12px 30px rgba(10,6,25,0.6)}

  .meta{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
  .nick{font-weight:800;color:white;font-family:Space Mono,monospace}
  .idline{color:var(--muted-2)}

  .share-actions{display:flex;gap:8px;margin-top:12px}
  .share-btn{flex:1;padding:12px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--purple-600),var(--purple-400));color:white;font-weight:800;cursor:pointer}

  .icon-btn{width:44px;height:44px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);display:inline-flex;align-items:center;justify-content:center;background:transparent;cursor:pointer}

  button:focus,input:focus{outline:none;box-shadow:0 0 0 4px rgba(107,33,168,0.12)}
</style>
</head>
<body>
  <div id="stageWrap" class="stage-wrap">
    <div class="stage">

      <div class="left panel">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="logo">M</div>
          <div>
            <div class="title">MushRush — Early Access</div>
            <div class="subtitle">Landing page • Share your referral to secure early access</div>
          </div>
          <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
            <button class="icon-btn" title="Menu">≡</button>
            <button class="icon-btn" id="loginX" title="Sign in with X">X</button>
          </div>
        </div>

        <div style="margin-top:10px">
          <div class="welcome">GET EARLY ACCESS</div>
          <div class="code-large" id="bigCode">CODE-09-6617</div>
          <div class="small" style="margin-top:6px">This page is marketing-only while the game is in development. Share your referral to increase your queue priority.</div>
        </div>

        <div class="ref-section">
          <div class="ref-row">
            <div class="ref-code" id="myRef">RF-7G-4K</div>
            <button id="copyRef" class="btn btn-secondary">Copy</button>
          </div>

          <div style="margin-top:6px;display:flex;gap:8px;align-items:center">
            <input id="useRef" class="input" placeholder="Use someone's referral code (optional)" maxlength="10" />
            <button id="applyRef" class="btn btn-primary">Apply</button>
          </div>
        </div>

        <div class="cta-list">
          <button class="btn btn-primary" id="registerBtn">Register for Early Access</button>
          <button class="btn btn-cta" id="sharePrimary">Share on X</button>
          <div style="display:flex;gap:8px">
            <button class="btn btn-secondary">Join Discord</button>
            <button class="btn btn-secondary">Follow on X</button>
          </div>
        </div>

      </div>

      <div class="right">
        <div class="card-wrap">
          <div class="rainbow-border">
            <div class="player-card">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div style="font-weight:800">PLAYER CARD</div>
                <div style="display:flex;gap:8px">
                  <button class="icon-btn" title="Download">⬇</button>
                  <button class="icon-btn" title="Close">✕</button>
                </div>
              </div>

              <div style="margin-top:12px">
                <div id="avatar" class="avatar" style="background-image:url('pc.avif')"></div>
                <div class="meta">
                  <div>
                    <div class="nick" id="nick">@PICITHECAT</div>
                    <div class="idline">ID: <span id="playerId">CODE-09-6617</span></div>
                  </div>
                  <div style="text-align:right">
                    <div class="small">Status</div>
                    <div style="font-weight:800;color:white">Registered</div>
                  </div>
                </div>

                <div class="share-actions">
                  <button id="shareBtn" class="share-btn">Share referral on X</button>
                </div>

                <div style="margin-top:12px" class="small">When people sign up with your referral code, your position in the early access queue improves. Share to increase your chances.</div>

              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>

  <script>
    // Fit-to-viewport scale logic (no scrolling)
    (function fitStage(){
      const wrap = document.getElementById('stageWrap');
      function apply(){
        const vw = window.innerWidth - 24;
        const vh = window.innerHeight - 24;
        const iw = wrap.offsetWidth;
        const ih = wrap.offsetHeight;
        const scale = Math.min(vw/iw, vh/ih, 1);
        wrap.style.transform = 'scale(' + scale + ')';
        wrap.style.marginTop = ((vh - ih*scale)/2 + 12) + 'px';
      }
      window.addEventListener('resize', apply);
      apply();
    })();

    // Simulated X login gating (demo)
    (function requireXLogin(){
      const logged = localStorage.getItem('mushrush.loggedX') === '1';
      if (!logged){
        const overlay = document.createElement('div');
        overlay.style.position='fixed';overlay.style.inset='0';overlay.style.background='linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.9))';overlay.style.display='flex';overlay.style.alignItems='center';overlay.style.justifyContent='center';overlay.style.zIndex=9999;
        overlay.innerHTML = `
          <div style='background:#0b0b10;padding:28px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:460px;text-align:center'>
            <div style='font-weight:800;font-size:18px;margin-bottom:10px'>Sign in with X to continue</div>
            <div style='color:rgba(255,255,255,0.64);margin-bottom:18px'>This is a demo. Click to simulate an X login. For production implement server-side OAuth.</div>
            <div style='display:flex;gap:10px;justify-content:center'>
              <button id='simX' style='background:linear-gradient(90deg,var(--purple-600),var(--purple-400));border:0;padding:12px 16px;border-radius:8px;color:white;cursor:pointer'>Sign in with X</button>
              <button id='guest' style='background:transparent;border:1px solid rgba(255,255,255,0.04);padding:12px 16px;border-radius:8px;color:white;cursor:pointer'>Continue as guest</button>
            </div>
          </div>
        `;
        document.body.appendChild(overlay);
        document.getElementById('simX').addEventListener('click', ()=>{ localStorage.setItem('mushrush.loggedX','1'); overlay.remove(); location.reload(); });
        document.getElementById('guest').addEventListener('click', ()=>{ overlay.remove(); });
      }
    })();

    // Basic interactions
    document.getElementById('loginX').addEventListener('click', ()=>{ localStorage.setItem('mushrush.loggedX','1'); alert('Simulated X login.'); location.reload(); });
    document.getElementById('copyRef').addEventListener('click', ()=>{ const txt = document.getElementById('myRef').innerText; navigator.clipboard.writeText(txt); alert('Referral copied'); });
    document.getElementById('applyRef').addEventListener('click', ()=>{ const v = document.getElementById('useRef').value.trim(); if (!v) return alert('Enter a referral code'); alert('Referral applied: ' + v + ' (demo)'); });

    // Register button (demo)
    document.getElementById('registerBtn').addEventListener('click', ()=>{
      const logged = localStorage.getItem('mushrush.loggedX') === '1';
      if (!logged) return alert('Please sign in with X first');
      alert('Registration simulated. In production this should submit an on-chain or backend registration.');
    });

    // Primary share button - opens X compose with prefilled message including ref
    function shareOnX(ref){
      const pageUrl = window.location.href;
      const text = `I'm on the MushRush early access waitlist! 🎮🌱\nGet early access and join me — use my referral code ${ref} to increase your spot.\nClaim your slot: ` + pageUrl + `\n#MushRush #crypto #gaming`;
      const url = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(text);
      window.open(url, '_blank', 'noopener');
    }

    document.getElementById('shareBtn').addEventListener('click', ()=>{ const ref = document.getElementById('myRef').innerText; shareOnX(ref); });
    document.getElementById('sharePrimary').addEventListener('click', ()=>{ const ref = document.getElementById('myRef').innerText; shareOnX(ref); });

    // derive a friendly ref from wallet if connected
    (async function setRefFromWallet(){
      try{
        if (window.ethereum){
          const accs = await window.ethereum.request({method:'eth_accounts'});
          if (accs && accs[0]){
            const r = accs[0].slice(2,8).toUpperCase();
            const formatted = 'RF-' + r.slice(0,2) + '-' + r.slice(2,4);
            document.getElementById('myRef').innerText = formatted;
            document.getElementById('bigCode').innerText = 'CODE-' + r.slice(0,2) + '-' + r.slice(2,4);
            document.getElementById('playerId').innerText = document.getElementById('bigCode').innerText;
            document.getElementById('nick').innerText = '@' + r.toLowerCase();
          }
        }
      }catch(e){console.log(e)}
    })();
  </script>
</body>
</html>
