<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Make Heaven Crowded — Wear Your Faith</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
  <meta name="description" content="Make Heaven Crowded — a faith-driven online shop and gospel hub. Shop Christian apparel, donate, read devotionals, and join the movement." />
<meta charset="utf-8" />  

<style>


:root{
  /* Core palette */
  --gold-50: #fff6e9;
  --gold-100: #fae6c4;
  --gold-400: #cf9b43;   /* used in gradients */
  --gold-500: #d4ab4e;   /* primary gold */
  --gold-600: #b8862f;
  --black-900: #070709;
  --black-800: #0b0f13;
  --muted-900: #111316;
  --muted-700: #3a3e42;
  --muted-500: #6e7377;
  --card: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,247,242,0.96));
  --glass: rgba(255,255,255,0.6);
  --glass-dark: rgba(11,11,12,0.6);
  --accent: var(--gold-500);
  --radius: 14px;
  --radius-sm: 8px;
  --shadow-soft: 0 6px 30px rgba(11,12,14,0.12);
  --shadow-deep: 0 12px 50px rgba(11,12,14,0.18);
  --max-width: 1180px;
  --container-pad: 20px;
  --ease: cubic-bezier(.2,.9,.2,1);
  --text: var(--muted-900);
  --bg: linear-gradient(180deg, #fff 0%, #fbfaf7 100%);
}

/* Light/Dark balance helpers (used to keep not fully dark nor fully light) */
body{
  font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.45;
  margin:0;
  padding:0;
  font-size:16px;
}

/* Utility: container */
.container{max-width:var(--max-width);margin:0 auto;padding:0 var(--container-pad);box-sizing:border-box}

/* Utility: visually-hidden (accessibility) */
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

/* Headings / type rhythm */
.site-title{font-family:'Roboto Slab', serif;font-weight:700;font-size:18px;margin:0;color:var(--black-900);letter-spacing:0.2px}
.site-tag{margin:0;font-size:12px;color:var(--muted-700);font-weight:600}
h1,h2,h3,h4{color:var(--muted-900);margin:0 0 8px 0}
h2{font-family:'Roboto Slab', serif;font-weight:700;font-size:36px;line-height:1.05}
.lead{font-size:18px;color:var(--muted-700);max-width:66ch}
.small{font-size:13px}
.muted{color:var(--muted-500)}
strong{color:var(--muted-900)}

/* Global link styles */
a{color:var(--accent);text-decoration:none;transition:all .18s var(--ease)}
a:hover{filter:brightness(0.97);text-decoration:underline}

/* =========================
   Header / Nav
   =========================*/
.site-header{position:sticky;top:0;z-index:1200;background:linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.60));backdrop-filter: blur(6px);border-bottom:1px solid rgba(11,11,12,0.04);box-shadow:0 6px 18px rgba(11,12,14,0.04)}
.nav-inner{display:flex;align-items:center;gap:18px;justify-content:space-between;padding:14px 0}
.brand{display:flex;gap:12px;align-items:center;text-decoration:none}
.logo{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--gold-50),var(--gold-100));color:var(--gold-600);box-shadow:var(--shadow-soft)}
.brand-text{display:flex;flex-direction:column}

.main-nav{flex:1;margin-left:12px}
.nav-list{display:flex;gap:10px;list-style:none;margin:0;padding:0;align-items:center}
.nav-list a{padding:8px 10px;border-radius:9px;color:var(--muted-700);font-weight:600}
.nav-list a:hover,.nav-list a:focus{background:linear-gradient(90deg,rgba(208,170,98,0.09),rgba(208,170,98,0.04));color:var(--muted-900)}

.nav-actions{display:flex;align-items:center;gap:10px}
.icon-btn{background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer;font-size:16px;display:inline-grid;place-items:center}
.icon-btn:hover{background:rgba(11,11,12,0.04)}
#cart-count{background:var(--accent);color:#fff;font-weight:800;padding:3px 7px;border-radius:999px;margin-left:6px;font-size:12px}

/* Primary / Ghost / Outline buttons */
.btn{display:inline-flex;align-items:center;gap:8px;font-weight:700;border-radius:12px;padding:10px 14px;font-size:14px;cursor:pointer;border:1px solid transparent;box-shadow:none;transition:transform .12s var(--ease),box-shadow .12s var(--ease)}
.btn.small{padding:6px 8px;border-radius:9px;font-size:13px}
.btn.primary{background:linear-gradient(180deg,var(--gold-500),var(--gold-600));color:#fff}
.btn.primary:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(208,170,98,0.18)}
.btn.ghost{background:transparent;border:1px solid rgba(11,11,12,0.06);color:var(--muted-900)}
.btn.ghost:hover{background:rgba(11,11,12,0.03)}
.btn.outline{background:transparent;border:1px dashed rgba(11,11,12,0.06);color:var(--muted-900)}

/* =========================
   HERO
   =========================*/
.hero-section{padding:48px 0}
.hero-grid{display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:start}
.hero-content{padding:12px}
.kicker{display:inline-block;background:linear-gradient(90deg,var(--gold-50),#fff);padding:6px 10px;border-radius:999px;font-weight:800;color:var(--gold-600);border:1px solid rgba(208,170,98,0.08)}
h2 mark.accent{background:linear-gradient(90deg,rgba(212,171,78,0.12),rgba(212,171,78,0.04));padding:4px 8px;border-radius:8px;color:var(--muted-900)}
.feature-list{list-style:none;padding:0;margin:18px 0 0 0;display:flex;flex-direction:column;gap:12px}
.feature-list li{display:flex;gap:10px;align-items:flex-start}
.feature-list .icon{width:20px;height:20px;color:var(--gold-600)}
.hero-ctas{display:flex;gap:10px;flex-wrap:wrap}

/* Hero media mockup */
.hero-media{position:relative;display:flex;flex-direction:column;align-items:flex-end}
.mockup-wrap{width:100%;max-width:420px;position:relative}
.hero-image{width:100%;height:auto;border-radius:14px;object-fit:cover;display:block;box-shadow:var(--shadow-deep);border:1px solid rgba(11,11,12,0.03)}

  /* === Hero slider styles === */
.hero-slider{position:relative;width:100%;max-width:420px;border-radius:16px;overflow:hidden;border:1px solid rgba(11,11,12,0.04);box-shadow:var(--shadow-deep);background:linear-gradient(180deg,rgba(0,0,0,0.02),rgba(255,255,255,0.02));}

/* slides stack */
.slides{position:relative;height:420px}
.slide{position:absolute;inset:0;opacity:0;transform:translateZ(0);transition:opacity .6s var(--ease);display:block}
.slide img{width:100%;height:420px;object-fit:cover;display:block;border-radius:14px;transform:scale(1.12);transition:transform 9s linear,filter .6s ease}
.slide.active{opacity:1;z-index:2}
.slide.active img{transform:scale(1);filter:brightness(0.98) saturate(1.05)}

/* caption overlay */
.slide-caption{position:absolute;left:14px;bottom:16px;right:14px;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));backdrop-filter: blur(6px);padding:12px;border-radius:12px;box-shadow:0 12px 30px rgba(11,12,14,0.06);border:1px solid rgba(11,11,12,0.03)}
.slide-caption .kicker{display:inline-block;font-weight:800;color:var(--gold-600);background:linear-gradient(90deg,var(--gold-50),#fff);padding:6px 10px;border-radius:999px;font-size:12px}

/* controls */
.slider-control{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.92);border:1px solid rgba(11,11,12,0.06);width:42px;height:42px;border-radius:10px;display:grid;place-items:center;font-size:22px;cursor:pointer;box-shadow:var(--shadow-soft);z-index:5}
.slider-control.prev{left:10px}
.slider-control.next{right:10px}
.slider-control:hover{transform:translateY(-50%) scale(1.03)}

/* dots */
.slider-dots{position:absolute;left:50%;transform:translateX(-50%);bottom:10px;display:flex;gap:8px;z-index:6}
.slider-dots button{width:10px;height:10px;border-radius:999px;border:0;background:rgba(11,11,12,0.18);cursor:pointer}
.slider-dots button.active{background:var(--gold-500);transform:scale(1.18)}

/* highlight card (kept similar but elevated) */
.highlight-card{position:absolute;right:12px;bottom:18px;display:flex;gap:10px;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 18px 40px rgba(11,12,14,0.12);border:1px solid rgba(11,11,12,0.04);cursor:pointer;z-index:8;transition:transform .18s var(--ease)}
.highlight-card:hover{transform:translateY(-6px)}
.highlight-thumb{width:64px;height:64px;border-radius:8px;object-fit:cover}
.highlight-copy .price{color:var(--gold-600);font-weight:900}

/* responsive adjustments */
@media (max-width:900px){
  .slides{height:320px}
  .slide img{height:320px}
  .hero-grid{gap:16px}
  .highlight-card{position:static;margin-top:10px;right:auto;bottom:auto}
}
@media (max-width:520px){
  .slides{height:240px}
  .slide img{height:240px}
  .slide-caption{padding:10px;font-size:14px}
  .slider-control{display:none}
}

/* Featured floating highlight card */
.highlight-card{position:absolute;right:12px;bottom:18px;display:flex;gap:10px;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 10px 30px rgba(11,12,14,0.12);border:1px solid rgba(11,11,12,0.04);cursor:pointer}
.highlight-thumb{width:64px;height:64px;border-radius:8px;object-fit:cover}
.highlight-copy{display:flex;flex-direction:column;align-items:flex-start}
.highlight-copy .price{color:var(--gold-600);font-weight:800}
.btn.small[role="link"]{padding:6px 8px;font-size:13px}

.hero-decor{margin-top:14px;display:grid;gap:12px}
.hero-ribbon{width:100%;height:32px;border-radius:10px;overflow:hidden;display:block}
.hero-vignette{display:flex;gap:10px;align-items:center}
.hero-vignette .v-item img{width:64px;height:64px;object-fit:cover;border-radius:10px}
.hero-trust{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.hero-trust .badge{padding:6px 8px;border-radius:999px;background:linear-gradient(90deg,var(--gold-50),#fff);font-weight:700;border:1px solid rgba(208,170,98,0.06)}

.verse-card{background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(250,247,242,0.9));padding:12px;border-radius:12px;border:1px solid rgba(11,11,12,0.04);box-shadow:var(--shadow-soft)}
.verse-label{font-weight:800;color:var(--gold-600);font-size:12px}
blockquote#verseOfDay{margin:8px 0 0 0;font-family:'Roboto Slab',serif;font-size:15px;color:var(--muted-700)}

/* =========================
   Sections & product grid
   =========================*/
.section{padding:36px 0;border-top:1px solid rgba(11,11,12,0.03)}
.section-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.section-head h3{font-size:20px}
.section-actions a{color:var(--muted-700)}

.product-grid, .product-grid *{box-sizing:border-box}
.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
.product-card{background:var(--card);border-radius:12px;padding:12px;border:1px solid rgba(11,11,12,0.04);box-shadow:var(--shadow-soft);display:flex;flex-direction:column;gap:10px}
.product-card .product-media img{width:100%;height:180px;object-fit:cover;border-radius:10px}
.product-title{font-weight:800}
.product-verse{color:var(--muted-700)}
.price{font-weight:900;color:var(--muted-900)}
.product-actions{margin-top:auto;display:flex;gap:8px}

/* Shop layout */
.grid-shop{display:grid;grid-template-columns:280px 1fr;gap:18px}
.shop-aside{position:relative}
.aside-card{background:linear-gradient(180deg,#fff,#fff);padding:12px;border-radius:12px;border:1px solid rgba(11,11,12,0.04);box-shadow:var(--shadow-soft);margin-bottom:12px}
.search-wrap input[type="search"], input[type="text"], input[type="email"], input[type="number"], textarea, select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(11,11,12,0.06);background:transparent;font-size:14px;font-family:inherit}
input:focus,textarea:focus,select:focus{outline:none;box-shadow:0 6px 20px rgba(208,170,98,0.12);border-color:var(--gold-500)}

.filters{display:flex;gap:8px;flex-wrap:wrap}
.chip{padding:8px 10px;border-radius:999px;border:1px solid rgba(11,11,12,0.06);background:transparent;cursor:pointer;font-weight:700}
.chip.active{background:linear-gradient(90deg,rgba(212,171,78,0.12),rgba(212,171,78,0.04));border-color:rgba(212,171,78,0.12)}

/* range input custom (simple) */
input[type=range]{-webkit-appearance:none;height:6px;background:linear-gradient(90deg,var(--gold-50),#fff);border-radius:999px}
input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--gold-500);box-shadow:0 6px 16px rgba(212,171,78,0.25)}

/* product quickview grid in modal */
.quickview{display:grid;grid-template-columns:1fr 1fr;gap:18px}
.quickview img{border-radius:10px}
.size-row .chip,.color-row .chip{display:inline-block;margin-right:6px}
.chip.selected{background:var(--gold-500);color:#fff;border-color:transparent}

/* cards used in gospel hub */
.card{background:var(--card);padding:12px;border-radius:12px;border:1px solid rgba(11,11,12,0.04);box-shadow:var(--shadow-soft)}
.card-head{display:flex;gap:8px;align-items:center}
.card .icon{width:22px;height:22px;color:var(--gold-600)}

.gospel-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.gospel-row{display:flex;gap:12px;margin-top:14px}
.sermon-card{flex:1}
.design-generator{flex:1;padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff);border:1px solid rgba(11,11,12,0.04)}
.design-controls{display:flex;gap:8px;align-items:center}
.design-preview canvas{width:140px;height:auto;border-radius:8px;border:1px solid rgba(11,11,12,0.04)}

/* donate cards */
.donation-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.donate-card{background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);padding:14px;border-radius:12px;border:1px solid rgba(11,11,12,0.04);text-align:center}
.donate-card h4{font-size:20px;margin-bottom:4px}
.donate-form{background:var(--card);padding:12px;border-radius:12px;border:1px solid rgba(11,11,12,0.04)}

/* Read & Grow articles */
.articles-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.article-card{background:var(--card);padding:12px;border-radius:12px}

/* Community marquee */
.community-section{padding:28px 0;background:linear-gradient(180deg,rgba(250,247,242,1),rgba(255,255,255,1))}
.marquee{overflow:hidden;border-radius:12px;border:1px solid rgba(11,11,12,0.04);padding:10px;background:linear-gradient(90deg, #fff, var(--gold-50))}
.marquee-track{display:flex;gap:10px;align-items:center;will-change:transform;animation:marquee-scroll linear infinite;animation-duration:var(--marquee-duration,18s)}
.marquee-item img{height:96px;width:auto;border-radius:10px;object-fit:cover}
@keyframes marquee-scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* About / contact / footer layout */
.about-grid{display:grid;grid-template-columns:1fr 360px;gap:18px;align-items:start}
.contact-card input, .contact-card textarea{width:100%}
.contact-grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
.newsletter-card{padding:12px;border-radius:12px}

.site-footer{padding:28px 0;background:linear-gradient(180deg,#0b0f13 0%, #0b0f13 100%);color:#fff}
.footer-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:18px;align-items:start}
.footer-brand h4{color:var(--gold-50)}
.footer-nav a{color:rgba(255,255,255,0.85)}
.footer-contact address{font-style:normal;color:rgba(255,255,255,0.7)}
.legal{margin-top:8px;color:rgba(255,255,255,0.6)}

/* Drawer & Modal */
.drawer{position:fixed;right:0;top:0;height:100vh;width:380px;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 40px 120px rgba(11,12,14,0.5);transform:translateX(100%);transition:transform .28s var(--ease);display:none;z-index:1400}
.drawer[aria-hidden="false"]{display:block;transform:translateX(0)}
.drawer-head{display:flex;justify-content:space-between;align-items:center;padding:12px;border-bottom:1px solid rgba(11,11,12,0.04)}
.drawer-body{padding:12px;overflow:auto;max-height:calc(100vh - 180px)}
.drawer-foot{padding:12px;border-top:1px solid rgba(11,11,12,0.04)}
.cart-item{display:flex;gap:12px;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(11,11,12,0.03)}
.cart-thumb img{width:64px;height:64px;object-fit:cover;border-radius:8px}
.qty-row{display:flex;gap:6px;align-items:center}
.qty-input{width:56px;padding:6px;border-radius:8px;border:1px solid rgba(11,11,12,0.06)}

.modal{position:fixed;inset:0;display:none;background:rgba(11,12,14,0.48);align-items:center;justify-content:center;z-index:1500}
.modal[aria-hidden="false"]{display:flex}
.modal-panel{background:linear-gradient(180deg,#fff,#fff);padding:18px;border-radius:12px;max-width:920px;width:92%;box-shadow:var(--shadow-deep)}

/* Toast (mhc-toast class used by JS) */
.mhc-toast{border-radius:12px;padding:12px 16px;font-weight:800;box-shadow:0 12px 30px rgba(11,12,14,0.28)}

/* product template etc */
template#product-template{display:none}

/* Accessibility: focus styles */
:focus{outline:none}
a:focus,button:focus,input:focus,select:focus{box-shadow:0 6px 20px rgba(212,171,78,0.14);border-radius:10px}

/* Responsive adjustments */
@media (max-width:1100px){
  .hero-grid{grid-template-columns:1fr 360px}
  .gospel-grid{grid-template-columns:repeat(2,1fr)}
  .product-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}
}
@media (max-width:900px){
  .nav-list{display:none}
  .hero-grid{grid-template-columns:1fr}
  .hero-media{order:-1}
  .grid-shop{grid-template-columns:1fr}
  .donation-grid{grid-template-columns:repeat(2,1fr)}
  .product-grid{grid-template-columns:repeat(2,1fr)}
  .footer-grid{grid-template-columns:1fr}
  .gospel-grid{grid-template-columns:1fr}
}
@media (max-width:520px){
  body{font-size:15px}
  .product-grid{grid-template-columns:1fr}
  .donation-grid{grid-template-columns:1fr}
  .marquee-track{animation-duration:24s}
}

/* Small visual flourishes: micro-interactions */
.product-card:hover{transform:translateY(-6px);box-shadow:0 30px 60px rgba(11,12,14,0.08)}
.highlight-card:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(11,12,14,0.12)}

/* specificity helpers for inline-styled elements in HTML (so we don't miss anything) */
.site-header .container [style], .hero-meta [style], .hero-ctas [style], .design-controls [style], .sermon-media [style], .donation-grid [style], .contact-card [style], .newsletter-card [style]{/* no-op but ensures precedence if needed */}

/* final: small print and defaults */
input::placeholder, textarea::placeholder{color:var(--muted-500)}

/* End of stylesheet */

</style>
  
</head>

  <body>
  <!-- ==========================
       HEADER / NAV
       ========================== -->
  <header class="site-header" role="banner">
    <div class="container nav-inner">
      <a href="#home" class="brand" aria-label="Make Heaven Crowded home">
        <div class="logo" aria-hidden="true">
          <!-- Cross + crowd icon -->
          <svg width="44" height="44" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="0" y="0" width="24" height="24" rx="6" fill="currentColor" opacity="0.06"/>
            <path d="M11 3h2v6h6v2h-6v6h-2v-6H5V9h6V3z" fill="currentColor" />
          </svg>
        </div>
        <div class="brand-text">
          <h1 class="site-title">Make Heaven Crowded</h1>
          <p class="site-tag">Wear the mission · Share the Word</p>
        </div>
      </a>

      <nav class="main-nav" role="navigation" aria-label="Main navigation">
        <ul class="nav-list">
          <li><a href="#home">Home</a></li>
          <li><a href="#shop">Shop</a></li>
          <li><a href="#gospel">Jesus Factor</a></li>
          <li><a href="#read">Read & Grow</a></li>
          <li><a href="#donate">Donate</a></li>
          <li><a href="#about">About</a></li>
        </ul>
      </nav>

      <div class="nav-actions">
        <button class="icon-btn" id="searchBtn" aria-label="Search">🔎</button>
        <button class="icon-btn" id="cartBtn" aria-label="Open cart">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 4h-2l-1 2h2l3.6 7.59-1.35 2.45a1 1 0 00.9 1.49h9v-2h-8.1l.6-1.09L19 6H7z" fill="currentColor"/>
          </svg>
          <span id="cart-count" aria-live="polite">0</span>
        </button>
        <a href="#shop" class="btn primary" id="ctaShop">Shop Now</a>
      </div>
    </div>
  </header>

  <!-- ==========================
       MAIN
       ========================== -->
  <main id="main" role="main">

    <!-- HERO (60% visual professionalism) -->
    <section id="home" class="hero-section" aria-labelledby="hero-heading">
      <div class="container hero-grid">

        <!-- LEFT: story, mission, CTAs -->
        <div class="hero-content">
          <span class="kicker">NEW DROP — Faith Collection</span>
          <h2 id="hero-heading">Make Heaven Crowded<br><mark class="accent">Wear the Mission. Start the Conversation.</mark></h2>
          <p class="lead">A movement disguised as apparel. Scripture-inscribed tees, conversation starters, and ministry resources — half shop, half gospel hub. Every purchase fuels outreach.</p>

          <div class="hero-ctas" style="margin-top:18px">
            <a href="#shop" class="btn primary">Shop Collection</a>
            <a href="#gospel" class="btn ghost">Read Devotionals</a>
            <a href="#donate" class="btn outline">Donate</a>
          </div>

          <ul class="feature-list" aria-hidden="true" style="margin-top:18px">
            <li>
              <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2L15 8l6 .5-4.5 3.5L18 20l-6-4-6 4 1.5-8.0L2 8.5 8 8z" fill="currentColor"/>
              </svg>
              <div>
                <strong>Purpose-Led</strong>
                <p class="muted small">Portion of profits funds outreach</p>
              </div>
            </li>
            <li>
              <svg class="icon" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2l2 5h5l-4 3 2 5-4-3-4 3 2-5L5 7h5z" fill="currentColor"/>
              </svg>
              <div>
                <strong>Gospel First</strong>
                <p class="muted small">Devotionals • Testimonies • Verse of the Day</p>
              </div>
            </li>
          </ul>

          <div class="hero-meta" style="margin-top:18px">
            <div class="crowd-meter" aria-hidden="true">
              <label class="muted small">Crowd Meter</label>
              <progress max="10000" value="3128"></progress>
              <div class="muted small">3,128 people joined the movement</div>
            </div>

            <div class="quick-links" aria-hidden="true">
              <a class="muted small" href="#read">Read</a>
              <a class="muted small" href="#gospel">Jesus Factor</a>
              <a class="muted small" href="#shop">Shop</a>
            </div>
          </div>
        </div>

       <!-- ===== Enhanced Hero: slideshow + dynamic highlight ===== -->
<aside class="hero-media" aria-hidden="false">
  <div id="heroSlider" class="hero-slider" aria-roledescription="carousel" aria-label="Hero slideshow">
    <div class="slides">
      <div class="slide" data-product="mhc-hd-01" data-bg="hero-people.jpg" aria-roledescription="slide" aria-label="Crowd Hoodie">
        <img src="hero-people.jpg" alt="People wearing Make Heaven Crowded apparel" />
        <div class="slide-caption">
          <div class="kicker">NEW DROP</div>
          <h3>Make Heaven Crowded — <mark class="accent">Faith Collection</mark></h3>
          <p class="small muted">Conversation-starting tees & cozy hoodies — ethically produced.</p>
          <div style="margin-top:10px">
            <a class="btn primary" href="#shop">Shop the Drop</a>
            <a class="btn ghost" href="#gospel">Read Devotionals</a>
          </div>
        </div>
      </div>

      <div class="slide" data-product="mhc-ts-02" data-bg="hero-people-2.jpg" aria-roledescription="slide" aria-label="Grace Tee">
        <img src="hero-people-2.jpg" alt="People wearing Make Heaven Crowded Grace Tee" />
        <div class="slide-caption">
          <div class="kicker">FEATURED</div>
          <h3>Grace Over Grind — <mark class="accent">Soft Tees</mark></h3>
          <p class="small muted">Simple designs, bold message. Perfect for campus conversations.</p>
          <div style="margin-top:10px">
            <a class="btn primary" href="#shop">Shop Tees</a>
          </div>
        </div>
      </div>

      <div class="slide" data-product="mhc-ts-01" data-bg="hero-people-3.jpg" aria-roledescription="slide" aria-label="Saved Tee">
        <img src="hero-people-3.jpg" alt="Saved Tee in the wild" />
        <div class="slide-caption">
          <div class="kicker">BEST SELLER</div>
          <h3>Saved Tee — <mark class="accent">Wear Your Story</mark></h3>
          <p class="small muted">Lightweight, breathable, and printed with scripture.</p>
          <div style="margin-top:10px">
            <a class="btn primary" href="#shop">View Best Seller</a>
          </div>
        </div>
      </div>
    </div>

    <button class="slider-control prev" aria-label="Previous slide">‹</button>
    <button class="slider-control next" aria-label="Next slide">›</button>

    <div class="slider-dots" role="tablist" aria-label="Slide dots"></div>
  </div>

  <!-- floating product highlight (will be updated by JS per slide) -->
  <button class="highlight-card" id="heroHighlight" data-product-id="mhc-hd-01" aria-label="Featured product">
    <img src="crowd-hoodie.jpg" alt="Featured product" class="highlight-thumb" />
    <div class="highlight-copy">
      <div class="small muted">Featured</div>
      <strong id="highlightTitle">Crowd Hoodie</strong>
      <div class="price" id="highlightPrice">$48</div>
      <span class="btn small" role="link" id="highlightBuy">Buy</span>
    </div>
  </button>

  <!-- Verse card kept below the slider -->
  <div class="verse-card" role="region" aria-label="Verse of the day" style="margin-top:14px">
    <div class="verse-label">Verse of the Day</div>
    <blockquote id="verseOfDay">— John 3:16 — For God so loved the world...</blockquote>
    <a class="muted small" href="#read">Read more »</a>
  </div>
</aside>


      </div>
    </section>

    <!-- ==========================
         FEATURED PRODUCTS / SHOP PREVIEW (heavy focus)
         ========================== -->
    <section id="featured" class="section">
      <div class="container">
        <header class="section-head">
          <div>
            <h3>Featured Drops</h3>
            <p class="muted small">Best sellers & latest releases — faith forward designs.</p>
          </div>
          <div class="section-actions">
            <a class="muted small" href="#shop">View full catalog</a>
          </div>
        </header>

        <div class="product-grid" id="featuredGrid" aria-live="polite">
          <!-- JS will inject featured product cards here -->
        </div>
      </div>
    </section>

    <!-- FULL SHOP with filters -->
    <section id="shop" class="section" aria-labelledby="shop-heading">
      <div class="container">
        <div class="section-head">
          <div>
            <h3 id="shop-heading">Shop</h3>
            <p class="muted small">T-Shirts • Hoodies • Tank Tops • Sweatshirts • Shorts</p>
          </div>

          <div class="shop-tools">
            <div class="search-wrap" role="search">
              <label for="siteSearch" class="visually-hidden">Search products</label>
              <input id="siteSearch" type="search" placeholder="Search products or verses" />
            </div>

            <div class="filters" role="toolbar" aria-label="Product categories">
              <button class="chip active" data-cat="all">All</button>
              <button class="chip" data-cat="tshirt">T-Shirts</button>
              <button class="chip" data-cat="hoodie">Hoodies</button>
              <button class="chip" data-cat="tank">Tank Tops</button>
              <button class="chip" data-cat="sweat">Sweatshirts</button>
              <button class="chip" data-cat="shorts">Shorts</button>
            </div>
          </div>

          <!-- single container: grid-shop (no nested .container) -->
          <div class="grid-shop" style="margin-top:18px">
            <aside class="shop-aside" aria-label="Shop filters">
              <div class="aside-card">
                <h4>Sort</h4>
                <select aria-label="Sort products" id="sortProducts">
                  <option value="featured">Featured</option>
                  <option value="new">New</option>
                  <option value="price-asc">Price: Low → High</option>
                  <option value="price-desc">Price: High → Low</option>
                </select>
              </div>

              <div class="aside-card">
                <h4>Price</h4>
                <input type="range" min="0" max="200" value="100" aria-label="Maximum price" />
              </div>

              <div class="aside-card">
                <h4>Sponsor</h4>
                <p class="muted small">Donate to provide evangelism shirts for outreach teams.</p>
                <button class="btn small primary" data-action="sponsor">Sponsor $30</button>
              </div>
            </aside>

            <section class="shop-list" id="shopList" aria-live="polite">
              <!-- full product grid injected by JS -->
            </section>
          </div>
        </div>
      </div>
    </section>

    <!-- ==========================
         GOSPEL HUB / JESUS FACTOR (40% content)
         ========================== -->
    <section id="gospel" class="section" aria-labelledby="gospel-heading">
      <div class="container">
        <header class="section-head">
          <div>
            <h3 id="gospel-heading">Jesus Factor</h3>
            <p class="muted small">Scripture of the day • Short teachings • Testimonies</p>
          </div>
          <div class="section-actions">
            <a class="muted small" href="#read">Go to Read & Grow</a>
          </div>
        </header>

        <div class="gospel-grid" aria-hidden="false">
          <article class="card devotional">
            <div class="card-head">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2l2 5h5l-4 3 2 5-4-3-4 3 2-5L5 7h5z" fill="currentColor" />
              </svg>
              <h4>Devotional: Courage (3 min)</h4>
            </div>
            <p class="muted small">A short reflection on Joshua 1 — how God equips the timid.</p>
            <a class="small" href="#">Read devotional »</a>
          </article>

          <article class="card testimony">
            <div class="card-head">
              <svg class="icon" width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1 4.5 2.09C12.09 5 13.76 4 15.5 4 18 4 20 6 20 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="currentColor" />
              </svg>
              <h4>Testimony: A Conversation that Led to Christ</h4>
            </div>
            <p class="muted small">How a simple question over a tee turned into a life changed on campus.</p>
            <a class="small" href="#">Read testimony »</a>
          </article>

          <article class="card scripture">
            <div class="card-head">
              <h4>Scripture Highlight</h4>
            </div>
            <blockquote class="muted small">"You are the light of the world." — Matthew 5:14</blockquote>
            <a class="small" href="#">Verse archive »</a>
          </article>
        </div>

        <!-- Gospel row: Featured Sermon (left) + Design Generator (right) -->
        <div class="gospel-row">
          <div class="sermon-card">
            <div class="sermon-body">
              <div class="sermon-label small muted">Featured Sermon</div>
              <h4>Short Message: Bold Witness</h4>
              <p class="muted small">A short, practical message you can share after a conversation. Watch & share with your community.</p>
              <div class="sermon-media" style="margin-top:10px">
                <iframe width="100%" height="180" src="https://www.youtube.com/embed/Vruq4I4RDCU" title="Featured Sermon" frameborder="0" allowfullscreen style="border-radius:8px"></iframe>
              </div>
              <div class="sermon-actions" style="margin-top:12px">
                <a class="btn small primary" href="#read">Read Sermon Notes</a>
                <a class="btn small ghost" href="#gospel">More Teachings</a>
              </div>
            </div>
          </div>

          <div class="design-generator" aria-labelledby="design-generator-heading">
            <h4 id="design-generator-heading">Design Generator</h4>
            <p class="muted small">Customize a verse and preview it on a shirt — add to cart as a custom design.</p>

            <div class="design-controls" style="margin-top:12px;align-items:flex-start">
              <label for="designText" class="visually-hidden">Design text</label>
              <input id="designText" type="text" placeholder="John 3:16 — For God so loved..." />

              <label for="designSize" class="visually-hidden">Size</label>
              <select id="designSize"><option>Small</option><option>Medium</option><option selected>Large</option></select>

              <div class="design-preview" style="margin-left:auto">
                <canvas id="designCanvas" width="300" height="360" aria-hidden="true"></canvas>
              </div>

              <div class="design-actions" style="margin-left:auto">
                <button class="btn primary">Preview</button>
                <button class="btn ghost">Add Custom Tee</button>
              </div>
            </div>
          </div>
        </div>
        <!-- end gospel-row -->

      </div>
    </section>

    <!-- ==========================
         DONATE / PARTNER
         ========================== -->
    <section id="donate" class="section" aria-labelledby="donate-heading">
      <div class="container">
        <header class="section-head">
          <div>
            <h3 id="donate-heading">Donate</h3>
            <p class="muted small">Your gifts fuel outreach, free evangelism apparel, and local ministry.</p>
          </div>
        </header>

        <div class="donation-grid" style="margin-top:14px">
          <div class="donate-card">
            <h4>$10</h4>
            <p class="muted small">Transport for an outreach trip</p>
            <button class="btn primary">Give $10</button>
          </div>
          <div class="donate-card">
            <h4>$25</h4>
            <p class="muted small">Printing 100 devotionals</p>
            <button class="btn primary">Give $25</button>
          </div>
          <div class="donate-card">
            <h4>$50</h4>
            <p class="muted small">Provides shirts for 5 evangelists</p>
            <button class="btn primary">Give $50</button>
          </div>

          <div class="donate-form">
            <label for="donCustom">Custom amount</label>
            <input id="donCustom" type="number" placeholder="Enter amount" />
            <div class="pay-methods" style="margin-top:8px;display:flex;gap:8px">
              <button class="btn ghost">PayPal</button>
              <button class="btn ghost">Stripe</button>
              <button class="btn ghost">Mobile Money</button>
            </div>
          </div>
        </div>

        <div class="transparency" style="margin-top:14px">
          <h4>How donations are used</h4>
          <ul class="muted small">
            <li>50% Outreach & Evangelism</li>
            <li>30% Production of free evangelism apparel</li>
            <li>20% Local community projects</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- ==========================
         READ & GROW (Articles / Devotionals)
         ========================== -->
    <section id="read" class="section" aria-labelledby="read-heading">
      <div class="container">
        <header class="section-head">
          <div>
            <h3 id="read-heading">Read & Grow</h3>
            <p class="muted small">Short devotionals, teachings, and book excerpts to strengthen faith.</p>
          </div>
          <div class="section-actions"><a class="muted small" href="#">View all articles</a></div>
        </header>

        <div class="articles-grid" style="margin-top:18px">
          <article class="article-card">
            <h4>How to Share Your Faith Naturally</h4>
            <p class="muted small">Practical tips for gospel conversations without pressure.</p>
            <a class="small" href="#">Read »</a>
          </article>

          <article class="article-card">
            <h4>Short Series: Identity in Christ</h4>
            <p class="muted small">A 7-day devotional exploring who we are in Jesus.</p>
            <a class="small" href="#">Read »</a>
          </article>

          <article class="article-card">
            <h4>Testimony: From Doubt to Faith</h4>
            <p class="muted small">A campus encounter that changed a life.</p>
            <a class="small" href="#">Read »</a>
          </article>
        </div>
      </div>
    </section>

    <!-- COMMUNITY MARQUEE — place this directly under the Read & Grow section -->
<section class="community-section" aria-labelledby="community-heading">
  <div class="container">
    <header style="text-align:center; margin-bottom:18px;">
      <h3 id="community-heading" style="font-size:36px; margin-bottom:6px;">Join a community of believers</h3>
      <p class="muted small" style="max-width:72ch; margin:0 auto;">
        You’re not alone — wear the message, meet the movement. See real people from our community sharing life, faith and conversations sparked by Make Heaven Crowded.
      </p>
    </header>

    <div class="marquee" aria-hidden="false" role="group" aria-label="Community photos scrolling">
      <div class="marquee-track" tabindex="0">
        <!-- Replace these `src` paths with your own images -->
        <div class="marquee-item"><img src="community-1.jpg" alt="Campus outreach with Make Heaven Crowded tee"></div>
        <div class="marquee-item"><img src="community-2.jpg" alt="Group worship and fellowship"></div>
        <div class="marquee-item"><img src="community-3.jpg" alt="Design reveal at an event"></div>
        <div class="marquee-item"><img src="community-4.jpg" alt="Friends sharing testimony"></div>
        <div class="marquee-item"><img src="community-5.jpg" alt="Street outreach with shirts"></div>

        <!-- duplicate (the script will also ensure duplication) -->
        <div class="marquee-item"><img src="community-1.jpg" alt="Campus outreach with Make Heaven Crowded tee"></div>
        <div class="marquee-item"><img src="community-2.jpg" alt="Group worship and fellowship"></div>
        <div class="marquee-item"><img src="community-3.jpg" alt="Design reveal at an event"></div>
        <div class="marquee-item"><img src="community-4.jpg" alt="Friends sharing testimony"></div>
        <div class="marquee-item"><img src="community-5.jpg" alt="Street outreach with shirts"></div>
      </div>
    </div>
  </div>
</section>
<!-- end community marquee -->

    <!-- ==========================
         ABOUT / GET INVOLVED
         ========================== -->
    <section id="about" class="section" aria-labelledby="about-heading">
      <div class="container about-grid">
        <div class="about-copy">
          <h3 id="about-heading">About Make Heaven Crowded</h3>
          <p class="muted">Founded as a campus movement, we believe clothing can be a gentle prompt for gospel conversations — a way to make heaven crowded, one conversation at a time.</p>

          <ul class="values-list" style="margin-top:12px">
            <li><strong>Vision</strong><span class="muted"> Equip believers to witness naturally.</span></li>
            <li><strong>Values</strong><span class="muted"> Scripture • Community • Compassion • Integrity</span></li>
          </ul>

          <div class="cta-row" style="margin-top:12px">
            <button class="btn primary">Become an Ambassador</button>
            <a class="muted" href="#contact">Contact</a>
          </div>
        </div>

        <aside class="about-aside">
          <div class="contact-card" style="padding:12px;border-radius:10px;border:1px solid rgba(11,11,12,0.04);background:var(--card)">
            <h4>Get involved</h4>
            <p class="muted small">Volunteer, partner, or request free evangelism materials.</p>
            <form id="ambassadorForm" style="margin-top:8px">
              <label class="visually-hidden" for="ambName">Name</label>
              <input id="ambName" type="text" placeholder="Your name" />
              <label class="visually-hidden" for="ambEmail">Email</label>
              <input id="ambEmail" type="email" placeholder="Email address" />
              <button class="btn primary" type="submit" style="margin-top:8px">Apply</button>
            </form>

            <div class="socials" style="margin-top:12px;display:flex;gap:8px">
              <a href="#" aria-label="Instagram">Instagram</a>
              <a href="#" aria-label="YouTube">YouTube</a>
              <a href="#" aria-label="TikTok">TikTok</a>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <!-- ==========================
         CONTACT / PRAYER
         ========================== -->
    <section id="contact" class="section" aria-labelledby="contact-heading">
      <div class="container contact-grid">
        <div>
          <h3 id="contact-heading">Prayer & Contact</h3>
          <p class="muted">Share prayer needs or reach out to collaborate. We would love to pray for you.</p>

          <form id="prayerForm" style="margin-top:12px">
            <label class="visually-hidden" for="prayerName">Name</label>
            <input id="prayerName" type="text" placeholder="Your name" />
            <label class="visually-hidden" for="prayerEmail">Email</label>
            <input id="prayerEmail" type="email" placeholder="Email (optional)" />
            <label class="visually-hidden" for="prayerText">Prayer request</label>
            <textarea id="prayerText" rows="4" placeholder="Write your prayer request..."></textarea>
            <button class="btn primary" type="submit" style="margin-top:8px">Send Prayer Request</button>
          </form>
        </div>

        <aside class="newsletter-card" style="padding:12px;border-radius:10px;border:1px solid rgba(11,11,12,0.04);background:var(--card)">
          <h4>Newsletter</h4>
          <p class="muted small">Weekly devotionals, new drops, and ministry updates.</p>
          <form id="newsletterForm" style="margin-top:8px">
            <label class="visually-hidden" for="newsletterEmail">Email</label>
            <input id="newsletterEmail" type="email" placeholder="Email address" />
            <button class="btn primary" type="submit" style="margin-top:8px">Subscribe</button>
          </form>
        </aside>
      </div>
    </section>

  </main>

  <!-- ==========================
       FOOTER
       ========================== -->
  <footer class="site-footer" role="contentinfo">
    <div class="container footer-grid">
      <div class="footer-brand">
        <h4>Make Heaven Crowded</h4>
        <p class="muted small">Wear your faith. Share the Word.</p>
      </div>

      <nav class="footer-nav" aria-label="Footer navigation">
        <h5 class="visually-hidden">Quick links</h5>
        <ul>
          <li><a href="#shop">Shop</a></li>
          <li><a href="#gospel">Jesus Factor</a></li>
          <li><a href="#read">Read & Grow</a></li>
        </ul>
      </nav>

      <div class="footer-contact">
        <h5 class="visually-hidden">Contact</h5>
        <address class="muted small">hello@makeheavencrowded.org<br/>Accra, Ghana</address>
        <div class="legal muted small">© Make Heaven Crowded — All rights reserved.</div>
      </div>
    </div>
  </footer>

  <!-- ==========================
       MODALS, DRAWERS & TEMPLATES (placeholders only)
       ========================== -->
  <!-- Cart drawer / modal (hidden by default) -->
  <aside id="cartDrawer" class="drawer" aria-hidden="true" aria-label="Shopping cart">
    <header class="drawer-head">
      <h3>Cart</h3>
      <button class="icon-btn" aria-label="Close cart">✕</button>
    </header>
    <div class="drawer-body">
      <div class="muted small">Your cart is empty.</div>
    </div>
    <footer class="drawer-foot">
      <div class="totals">Total: <strong id="cartTotal">$0.00</strong></div>
      <button class="btn primary">Checkout</button>
    </footer>
  </aside>

  <!-- generic modal -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <!-- dynamic content injected here -->
    </div>
  </div>

  <!-- product card template -->
  <template id="product-template">
    <article class="product-card" data-product-id="">
      <a class="product-media" href="#">
        <img src="" alt="" />
      </a>
      <div class="product-body">
        <h4 class="product-title"></h4>
        <p class="muted small product-verse"></p>
        <div class="price"></div>
        <div class="product-actions">
          <button class="btn ghost" data-action="quickview">View</button>
          <button class="btn primary" data-action="add-to-cart">Add</button>
        </div>
      </div>
    </article>
  </template>
</body>

  <script>


(() => {
  'use strict';


  const PRODUCTS = [
    { id: 'mhc-ts-01', title: 'Saved Tee', type: 'tshirt', price: 22, colors: ['Black','White'], sizes: ['S','M','L','XL'], verse: 'Romans 10:9', img: 'saved-tee.jpg' },
    { id: 'mhc-ts-02', title: 'Grace Over Grind', type: 'tshirt', price: 24, colors: ['Navy','White'], sizes: ['S','M','L','XL'], verse: 'Ephesians 2:8', img: 'grace-tee.jpg' },
    { id: 'mhc-hd-01', title: 'Crowd Hoodie', type: 'hoodie', price: 48, colors: ['Charcoal','Maroon'], sizes: ['M','L','XL'], verse: 'Matthew 28:19', img: 'crowd-hoodie.jpg' },
    { id: 'mhc-tk-01', title: 'Witness Tank', type: 'tank', price: 20, colors: ['White','Olive'], sizes: ['S','M','L'], verse: 'Acts 1:8', img: 'witness-tank.jpg' },
    { id: 'mhc-sw-01', title: 'Faith Sweatshirt', type: 'sweat', price: 40, colors: ['Cream','Black'], sizes: ['M','L','XL'], verse: 'Philippians 4:13', img: 'faith-sweatshirt.jpg' },
    { id: 'mhc-sh-01', title: 'Kingdom Shorts', type: 'shorts', price: 30, colors: ['Black'], sizes: ['M','L','XL'], verse: 'Colossians 3:23', img: 'kingdom-shorts.jpg' },
  ];

  const VERSES = [
    'John 3:16 — For God so loved the world that he gave his one and only Son...',
    'Romans 8:28 — And we know that in all things God works for the good...',
    'Philippians 4:13 — I can do all things through Christ who strengthens me.',
    'Proverbs 3:5-6 — Trust in the Lord with all your heart...',
    'Matthew 5:14 — You are the light of the world. A city set on a hill cannot be hidden.',
  ];

  // LocalStorage keys
  const CART_KEY = 'mhc_cart_v2';
  const NEWS_KEY = 'mhc_news_v1';

  /* =========================
     DOM helpers
     ========================= */
  const $ = (sel, ctx = document) => ctx.querySelector(sel);
  const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));
  const money = n => '$' + Number(n).toFixed(2);
  const safeText = s => (s === null || s === undefined) ? '' : String(s);

  /* =========================
     ELEMENT REFS
     ========================= */
  const refs = {
    featuredGrid: $('#featuredGrid'),
    productTemplate: $('#product-template'),
    shopList: $('#shopList'),
    chips: $$('.chip'),
    siteSearch: $('#siteSearch'),
    cartBtn: $('#cartBtn'),
    cartCount: $('#cart-count'),
    cartDrawer: $('#cartDrawer'),
    cartDrawerBody: $('#cartDrawer .drawer-body'),
    cartTotal: $('#cartTotal'),
    modal: $('#modal'),
    modalPanel: $('#modal .modal-panel'),
    verseBlock: $('#verseOfDay'),
    designCanvas: $('#designCanvas'),
    designText: $('#designText'),
    designSize: $('#designSize'),
    designPreviewBtn: null, // will attach later if exists
    donCustom: $('#donCustom'),
    ambassadorForm: $('#ambassadorForm'),
    prayerForm: $('#prayerForm'),
    newsletterForm: $('#newsletterForm'),
    highlightCards: $$('.highlight-card'),
    progressEls: $$('progress'),
  };

  /* =========================
     CART API
     ========================= */
  function readCart() {
    try {
      return JSON.parse(localStorage.getItem(CART_KEY) || '[]');
    } catch (e) {
      console.warn('Cart parse error', e);
      return [];
    }
  }
  function writeCart(cart) {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    renderCartCount();
    renderCartDrawer();
  }
  function addToCart(product, opts = {}) {
    const cart = readCart();
    // product may be a full product object or id
    let item;
    if (typeof product === 'string') {
      const p = PRODUCTS.find(x => x.id === product) || { id: product, title: product, price: 0, img: '' };
      item = { ...p, qty: 1, opts };
    } else {
      item = { ...product, qty: 1, opts };
    }
    // merge if same id + same opts
    const existingIndex = cart.findIndex(i => i.id === item.id && JSON.stringify(i.opts) === JSON.stringify(item.opts));
    if (existingIndex > -1) {
      cart[existingIndex].qty += 1;
    } else {
      cart.push(item);
    }
    writeCart(cart);
    showToast('Added to cart');
  }
  function removeFromCart(index) {
    const cart = readCart();
    cart.splice(index, 1);
    writeCart(cart);
  }
  function updateQty(index, qty) {
    const cart = readCart();
    if (!cart[index]) return;
    cart[index].qty = Math.max(1, Math.floor(qty) || 1);
    writeCart(cart);
  }
  function cartTotalAmount() {
    const cart = readCart();
    return cart.reduce((s, it) => s + (Number(it.price || 0) * (Number(it.qty) || 1)), 0);
  }

  /* =========================
     RENDERING PRODUCTS
     ========================= */
  function clearChildren(el) {
    while (el.firstChild) el.removeChild(el.firstChild);
  }

  function createProductCard(p) {
    // Use template if available, else build manually
    const tpl = refs.productTemplate;
    if (tpl && tpl.content) {
      const node = tpl.content.cloneNode(true);
      const article = node.querySelector('article');
      article.dataset.productId = p.id;
      const img = article.querySelector('img');
      if (img) { img.src = p.img; img.alt = p.title; }
      const title = article.querySelector('.product-title') || article.querySelector('h4');
      if (title) title.textContent = p.title;
      const verseEl = article.querySelector('.product-verse');
      if (verseEl) verseEl.textContent = p.verse;
      const priceEl = article.querySelector('.price');
      if (priceEl) priceEl.textContent = money(p.price);
      // wire actions
      const quick = article.querySelector('[data-action="quickview"]');
      if (quick) quick.addEventListener('click', e => { openQuickview(p.id); });
      const addBtn = article.querySelector('[data-action="add-to-cart"]');
      if (addBtn) addBtn.addEventListener('click', e => { addToCart(p); });
      return article;
    }

    // fallback manual card
    const card = document.createElement('article');
    card.className = 'product-card';
    card.dataset.productId = p.id;
    card.innerHTML = `
      <a class="product-media" href="#"><img src="${p.img}" alt="${p.title}"></a>
      <div class="product-body">
        <h4 class="product-title">${p.title}</h4>
        <p class="muted small product-verse">${p.verse}</p>
        <div class="price">${money(p.price)}</div>
        <div class="product-actions">
          <button class="btn ghost" data-action="quickview">View</button>
          <button class="btn primary" data-action="add-to-cart">Add</button>
        </div>
      </div>
    `;
    // attach events
    const q = card.querySelector('[data-action="quickview"]');
    if (q) q.addEventListener('click', () => openQuickview(p.id));
    const a = card.querySelector('[data-action="add-to-cart"]');
    if (a) a.addEventListener('click', () => addToCart(p));
    return card;
  }

  function renderFeatured() {
    if (!refs.featuredGrid) return;
    clearChildren(refs.featuredGrid);
    const featured = PRODUCTS.slice(0, 3);
    featured.forEach(p => {
      const card = createProductCard(p);
      refs.featuredGrid.appendChild(card);
    });
  }

  function renderShopList(items = PRODUCTS) {
    if (!refs.shopList) return;
    clearChildren(refs.shopList);
    items.forEach(p => refs.shopList.appendChild(createProductCard(p)));
  }

  /* =========================
     FILTERS + SEARCH
     ========================= */
  function wireFilters() {
    refs.chips.forEach(chip => {
      chip.addEventListener('click', () => {
        const cat = chip.dataset.cat;
        // active style toggling
        refs.chips.forEach(c => c.classList.remove('active'));
        chip.classList.add('active');
        if (!cat || cat === 'all') renderShopList();
        else renderShopList(PRODUCTS.filter(p => p.type === cat));
      });
    });
  }

  function wireSearch() {
    if (!refs.siteSearch) return;
    let timeout = null;
    refs.siteSearch.addEventListener('input', e => {
      clearTimeout(timeout);
      timeout = setTimeout(() => {
        const q = refs.siteSearch.value.trim().toLowerCase();
        if (!q) return renderShopList();
        const results = PRODUCTS.filter(p => (p.title + ' ' + p.verse + ' ' + (p.type||'')).toLowerCase().includes(q));
        renderShopList(results);
      }, 200);
    });
    refs.siteSearch.addEventListener('keydown', e => {
      if (e.key === 'Enter') e.preventDefault();
    });
  }

  /* =========================
     MODAL (generic quickview/modal)
     ========================= */
  function openModal(html, opts = {}) {
    if (!refs.modal || !refs.modalPanel) return;
    refs.modalPanel.innerHTML = '';
    if (typeof html === 'string') {
      refs.modalPanel.innerHTML = html;
    } else if (html instanceof Node) {
      refs.modalPanel.appendChild(html);
    }
    refs.modal.setAttribute('aria-hidden', 'false');
    refs.modal.style.display = 'block';
    // focus the first focusable element inside panel
    const focusable = refs.modalPanel.querySelector('button, a, input, textarea, select');
    if (focusable) focusable.focus();
    // trap simple focus
    document.addEventListener('keydown', modalKeyHandler);
  }

  function closeModal() {
    if (!refs.modal) return;
    refs.modal.setAttribute('aria-hidden', 'true');
    refs.modal.style.display = 'none';
    refs.modalPanel.innerHTML = '';
    document.removeEventListener('keydown', modalKeyHandler);
  }

  function modalKeyHandler(e) {
    if (e.key === 'Escape') closeModal();
  }

  // close modal when clicking overlay
  if (refs.modal) {
    refs.modal.addEventListener('click', (ev) => {
      if (ev.target === refs.modal) closeModal();
    });
  }

  /* =========================
     QUICKVIEW: displays product details in modal
     ========================= */
  function openQuickview(productId) {
    const p = PRODUCTS.find(x => x.id === productId);
    if (!p) {
      openModal(`<div class="modal-body"><p>Product not found.</p><div style="text-align:right"><button class="btn ghost" onclick="document.querySelector('[data-close-modal]')?.click()">Close</button></div></div>`);
      return;
    }
    const html = document.createElement('div');
    html.className = 'quickview';
    html.innerHTML = `
      <div class="quickview-grid">
        <div class="left">
          <img src="${p.img}" alt="${p.title}" style="width:100%;height:auto;border-radius:10px" />
        </div>
        <div class="right">
          <h2>${p.title}</h2>
          <div class="muted small">${p.verse}</div>
          <div class="price" style="margin-top:10px;font-weight:800">${money(p.price)}</div>
          <div style="margin-top:12px">
            <label class="small">Size</label>
            <div class="size-row">${p.sizes.map(s => `<button class="chip size-chip" data-size="${s}">${s}</button>`).join(' ')}</div>
            <label class="small" style="margin-top:10px;display:block">Color</label>
            <div class="color-row">${p.colors.map(c => `<button class="chip color-chip" data-color="${c}">${c}</button>`).join(' ')}</div>
          </div>
          <div style="margin-top:14px;display:flex;gap:8px">
            <button class="btn primary" data-add> Add to cart </button>
            <button class="btn ghost" data-close> Close </button>
          </div>
        </div>
      </div>
    `;
    // wire events inside modal after opening
    openModal(html);
    // size selection
    $$('.size-chip', html).forEach(b => b.addEventListener('click', () => {
      $$('.size-chip', html).forEach(x => x.classList.remove('selected'));
      b.classList.add('selected');
    }));
    $$('.color-chip', html).forEach(b => b.addEventListener('click', () => {
      $$('.color-chip', html).forEach(x => x.classList.remove('selected'));
      b.classList.add('selected');
    }));
    const addBtn = html.querySelector('[data-add]');
    if (addBtn) addBtn.addEventListener('click', () => {
      const size = html.querySelector('.size-chip.selected')?.dataset?.size || null;
      const color = html.querySelector('.color-chip.selected')?.dataset?.color || null;
      addToCart(p, { size, color });
      closeModal();
    });
    const closeBtn = html.querySelector('[data-close]');
    if (closeBtn) closeBtn.addEventListener('click', closeModal);
  }

  /* =========================
     CART DRAWER UI
     ========================= */
  function openCartDrawer() {
    if (!refs.cartDrawer) return;
    refs.cartDrawer.setAttribute('aria-hidden', 'false');
    refs.cartDrawer.style.display = 'block';
    const closeBtn = refs.cartDrawer.querySelector('.drawer-head .icon-btn');
    if (closeBtn) {
      closeBtn.addEventListener('click', closeCartDrawer);
    }
    // trap Esc to close
    document.addEventListener('keydown', cartDrawerKeyHandler);
    refs.cartDrawer.querySelector('button, a, input')?.focus();
  }

  function closeCartDrawer() {
    if (!refs.cartDrawer) return;
    refs.cartDrawer.setAttribute('aria-hidden', 'true');
    refs.cartDrawer.style.display = 'none';
    document.removeEventListener('keydown', cartDrawerKeyHandler);
  }

  function cartDrawerKeyHandler(e) {
    if (e.key === 'Escape') closeCartDrawer();
  }

  function renderCartCount() {
    const count = readCart().reduce((s, it) => s + (Number(it.qty) || 1), 0);
    if (refs.cartCount) refs.cartCount.textContent = count;
  }

  function renderCartDrawer() {
    if (!refs.cartDrawerBody) return;
    clearChildren(refs.cartDrawerBody);
    const cart = readCart();
    if (!cart.length) {
      refs.cartDrawerBody.innerHTML = '<div class="muted small">Your cart is empty.</div>';
      if (refs.cartTotal) refs.cartTotal.textContent = money(0);
      return;
    }
    cart.forEach((it, i) => {
      const itemRow = document.createElement('div');
      itemRow.className = 'cart-item';
      itemRow.innerHTML = `
        <div class="cart-thumb"><img src="${it.img || '/assets/placeholder.png'}" alt="${it.title}" /></div>
        <div class="cart-meta">
          <div class="cart-title">${it.title}</div>
          <div class="muted small">${safeText(it.verse || '')}${it.opts && (it.opts.size || it.opts.color) ? ' • ' + [it.opts.size, it.opts.color].filter(Boolean).join(' / ') : ''}</div>
        </div>
        <div class="cart-actions">
          <div class="cart-price">${money(it.price)}</div>
          <div class="qty-row">
            <button class="icon-btn qty-decrease" data-index="${i}" aria-label="Decrease">−</button>
            <input class="qty-input" data-index="${i}" value="${it.qty}" type="number" min="1" aria-label="Quantity" />
            <button class="icon-btn qty-increase" data-index="${i}" aria-label="Increase">+</button>
          </div>
          <button class="btn ghost remove-item" data-index="${i}">Remove</button>
        </div>
      `;
      // attach events after creating element
      refs.cartDrawerBody.appendChild(itemRow);
    });

    // wire qty controls
    $$('.qty-decrease', refs.cartDrawerBody).forEach(btn => {
      btn.addEventListener('click', e => {
        const i = Number(btn.dataset.index);
        const cart = readCart();
        if (!cart[i]) return;
        cart[i].qty = Math.max(1, (cart[i].qty || 1) - 1);
        writeCart(cart);
      });
    });
    $$('.qty-increase', refs.cartDrawerBody).forEach(btn => {
      btn.addEventListener('click', e => {
        const i = Number(btn.dataset.index);
        const cart = readCart();
        if (!cart[i]) return;
        cart[i].qty = (cart[i].qty || 1) + 1;
        writeCart(cart);
      });
    });
    $$('.qty-input', refs.cartDrawerBody).forEach(input => {
      input.addEventListener('change', e => {
        const i = Number(input.dataset.index);
        updateQty(i, Number(input.value));
      });
      input.addEventListener('keydown', e => { if (e.key === 'Enter') input.blur(); });
    });
    $$('.remove-item', refs.cartDrawerBody).forEach(btn => {
      btn.addEventListener('click', () => {
        const i = Number(btn.dataset.index);
        removeFromCart(i);
      });
    });

    // totals
    if (refs.cartTotal) refs.cartTotal.textContent = money(cartTotalAmount());
    // checkout action (simple)
    const checkoutBtn = refs.cartDrawer.querySelector('.drawer-foot .btn.primary');
    if (checkoutBtn) {
      checkoutBtn.addEventListener('click', () => {
        closeCartDrawer();
        showToast('Checkout placeholder — integrate payment on server.');
      });
    }
  }

  /* =========================
     Verse of the day (deterministic)
     ========================= */
  function getVerseOfDay() {
    const now = new Date();
    const idx = (now.getFullYear() + now.getMonth() + now.getDate()) % VERSES.length;
    return VERSES[idx];
  }

  function renderVerseOfDay() {
    if (!refs.verseBlock) return;
    refs.verseBlock.textContent = getVerseOfDay();
  }

  /* =========================
     Design Generator (canvas)
     ========================= */
  function drawDesignPreview(text) {
    const canvas = refs.designCanvas;
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    // Clear
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    // Background
    ctx.fillStyle = '#0b0f13';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // Shirt base
    ctx.fillStyle = '#111';
    ctx.beginPath();
    ctx.moveTo(40, 40);
    ctx.quadraticCurveTo(30, 20, 70, 30);
    ctx.lineTo(canvas.width - 70, 30);
    ctx.quadraticCurveTo(canvas.width - 30, 20, canvas.width - 40, 40);
    ctx.lineTo(canvas.width - 40, canvas.height - 80);
    ctx.quadraticCurveTo(canvas.width / 2, canvas.height - 30, 40, canvas.height - 80);
    ctx.closePath();
    ctx.fill();

    // Shirt text
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 16px Roboto Slab, serif';
    wrapText(ctx, text, canvas.width / 2, 120, canvas.width - 120, 20, true);
  }

  // centered wrap text helper
  function wrapText(ctx, text, centerX, y, maxWidth, lineHeight, center = false) {
    const words = text.split(' ');
    let line = '';
    const lines = [];
    for (let n = 0; n < words.length; n++) {
      const testLine = line + words[n] + ' ';
      const metrics = ctx.measureText(testLine);
      const testWidth = metrics.width;
      if (testWidth > maxWidth && n > 0) {
        lines.push(line.trim());
        line = words[n] + ' ';
      } else {
        line = testLine;
      }
    }
    lines.push(line.trim());
    // draw lines centered
    lines.forEach((ln, i) => {
      ctx.font = (i === 0 ? 'bold 16px Roboto Slab, serif' : '14px Roboto Slab, serif');
      const m = ctx.measureText(ln);
      const x = center ? centerX - (m.width / 2) : 60;
      ctx.fillText(ln, x, y + (i * lineHeight));
    });
  }

  function wireDesignGenerator() {
    if (!refs.designCanvas) return;
    // initial draw with placeholder
    drawDesignPreview((refs.designText && refs.designText.value) || 'John 3:16 — For God so loved the world');
    // preview button hooking
    const previewBtn = document.querySelector('.design-actions .btn.primary') || null;
    if (previewBtn) {
      previewBtn.addEventListener('click', () => {
        const text = (refs.designText && refs.designText.value) || 'John 3:16 — For God so loved the world';
        drawDesignPreview(text);
      });
    }
    // add custom tee button
    const addCustomBtn = document.querySelector('.design-actions .btn.ghost') || null;
    if (addCustomBtn) {
      addCustomBtn.addEventListener('click', () => {
        const text = (refs.designText && refs.designText.value) || 'Custom Verse';
        const size = (refs.designSize && refs.designSize.value) || 'Large';
        // create a simple custom product
        const product = { id: 'custom-' + Date.now(), title: `Custom Tee — ${text.slice(0, 20)}`, type: 'tshirt', price: 28, sizes:[size], colors:['Custom'], verse: text, img: '/assets/custom-preview.jpg' };
        addToCart(product, { customText: text, size });
      });
    }
  }

  /* =========================
     Donation flow (simulated)
     ========================= */
  function wireDonationButtons() {
    // sponsor buttons in the page (data-action="sponsor")
    $$('[data-action="sponsor"]').forEach(btn => {
      btn.addEventListener('click', () => {
        showToast('Sponsor flow started (demo). Integrate gateway server-side for real payments.');
      });
    });
    // pay buttons inside donate card
    $$('.donate-card .btn.primary, .donation .btn.primary, .donation .ghost').forEach(b => {
      // not all pages have these exact selectors; they will be ignored if absent
      b.addEventListener('click', () => showToast('Donation simulated (demo).'));
    });
  }

  /* =========================
     Forms: Ambassador, Prayer, Newsletter, Testimony
     ========================= */
  function wireForms() {
    if (refs.ambassadorForm) {
      refs.ambassadorForm.addEventListener('submit', e => {
        e.preventDefault();
        const name = refs.ambassadorForm.querySelector('#ambName') ? refs.ambassadorForm.querySelector('#ambName').value.trim() : '';
        const email = refs.ambassadorForm.querySelector('#ambEmail') ? refs.ambassadorForm.querySelector('#ambEmail').value.trim() : '';
        if (!name || !email) { alert('Provide name and email.'); return; }
        showToast('Ambassador application received. Thank you!');
        refs.ambassadorForm.reset();
      });
    }

    if (refs.prayerForm) {
      refs.prayerForm.addEventListener('submit', e => {
        e.preventDefault();
        const name = refs.prayerForm.querySelector('#prayerName') ? refs.prayerForm.querySelector('#prayerName').value.trim() : '';
        const text = refs.prayerForm.querySelector('#prayerText') ? refs.prayerForm.querySelector('#prayerText').value.trim() : '';
        if (!text) { alert('Please write your prayer request.'); return; }
        showToast('Prayer request submitted. We will pray for you.');
        refs.prayerForm.reset();
      });
    }

    if (refs.newsletterForm) {
      refs.newsletterForm.addEventListener('submit', e => {
        e.preventDefault();
        const email = refs.newsletterForm.querySelector('#newsletterEmail') ? refs.newsletterForm.querySelector('#newsletterEmail').value.trim() : '';
        if (!email || !email.includes('@')) { alert('Enter a valid email.'); return; }
        localStorage.setItem(NEWS_KEY, email);
        showToast('Subscribed to newsletter. Welcome!');
        refs.newsletterForm.reset();
      });
    }
  }

  /* =========================
     Misc UI helpers: toast
     ========================= */
  let toastTimer = null;
  function showToast(msg, timeout = 1400) {
    // re-use modal area as simple toast (non-blocking)
    const toast = document.createElement('div');
    toast.className = 'mhc-toast';
    toast.setAttribute('role', 'status');
    toast.style.cssText = 'position:fixed;right:18px;bottom:18px;background:#0b1720;color:#fff;padding:12px 16px;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.5);z-index:1400;font-weight:700';
    toast.textContent = msg;
    document.body.appendChild(toast);
    clearTimeout(toastTimer);
    toastTimer = setTimeout(() => {
      toast.style.transition = 'opacity .3s ease';
      toast.style.opacity = '0';
      setTimeout(() => { toast.remove(); }, 320);
    }, timeout);
  }

  /* =========================
     Highlight card quick buy
     ========================= */
  function wireHighlightCards() {
    refs.highlightCards.forEach(card => {
      card.addEventListener('click', () => {
        const id = card.dataset.productId;
        if (!id) return;
        const p = PRODUCTS.find(x => x.id === id);
        if (!p) { showToast('Featured product not found'); return; }
        addToCart(p);
      });
    });
  }

  /* =========================
     Utilities / initialization
     ========================= */
  function wireGlobalUI() {
    // open cart drawer
    if (refs.cartBtn) refs.cartBtn.addEventListener('click', () => {
      renderCartDrawer();
      openCartDrawer();
    });

    // modal close through escape handled in modalKeyHandler
    // wire close for drawer overlay clicks
    if (refs.cartDrawer) {
      refs.cartDrawer.addEventListener('click', (e) => {
        if (e.target === refs.cartDrawer) closeCartDrawer();
      });
    }

    // close drawer when clicking close icon already wired in renderCartDrawer
  }

  /* =========================
     Initial render & boot
     ========================= */
  function boot() {
    renderFeatured();
    renderShopList();
    renderCartCount();
    renderCartDrawer();
    renderVerseOfDay();
    wireFilters();
    wireSearch();
    wireGlobalUI();
    wireHighlightCards();
    wireDesignGenerator();
    wireDonationButtons();
    wireForms();

    // wire quickview/add-to-cart event delegation for any dynamically created product-cards
    document.body.addEventListener('click', function (e) {
      const a = e.target.closest('[data-action="add-to-cart"]');
      if (a) {
        // find parent product card
        const card = a.closest('[data-product-id]');
        if (card) {
          const id = card.dataset.productId;
          const p = PRODUCTS.find(x => x.id === id);
          if (p) { addToCart(p); }
        }
      }
      const q = e.target.closest('[data-action="quickview"]');
      if (q) {
        const card = q.closest('[data-product-id]');
        if (card) {
          openQuickview(card.dataset.productId);
        }
      }
    });

    // wire chips that may be generated later as well (delegated)
    document.body.addEventListener('click', function(e) {
      const chip = e.target.closest('.chip');
      if (!chip) return;
      // handled earlier by wireFilters only for initial chips; ensure active class toggles
      refs.chips.forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
    });

    // simple history state: update crowd meter progress (example)
    try {
      refs.progressEls.forEach(p => {
        // if it has max attribute and value attr, animate subtly
        const v = Number(p.value) || 0;
        p.value = 0;
        setTimeout(() => { p.value = v; }, 180);
      });
    } catch (e) { /* ignore */ }
  }

  // Expose some functions to console for debugging/testing
  window.MHC = {
    PRODUCTS,
    addToCart,
    readCart,
    writeCart,
    openQuickview,
    openModal,
    closeModal,
    renderVerseOfDay,
    drawDesignPreview,
  };

  // Boot
  document.addEventListener('DOMContentLoaded', boot);
})();
</script>
<script>

  // Community marquee helper — ensures seamless loop, pause on hover/focus, dynamic speed
(function(){
  const tracks = document.querySelectorAll('.marquee-track');
  tracks.forEach(track => {
    // If track children are not duplicated, duplicate them for a seamless loop
    const children = Array.from(track.children);
    if (children.length && !track.dataset.duplicated) {
      // compute total width to choose a good duration if desired
      const totalItems = children.length;
      // duplicate once so CSS animation can shift -50%
      children.forEach(n => track.appendChild(n.cloneNode(true)));
      track.dataset.duplicated = 'true';
    }

    // set a duration based on items (more items -> longer duration)
    const itemCount = track.querySelectorAll('.marquee-item').length;
    // use base speed per item (seconds per 4 items) — tweak multiplier as desired
    const basePer4 = 12; // seconds per 4 items
    const duration = Math.max(12, Math.round((itemCount / 4) * basePer4));
    track.style.setProperty('--marquee-duration', duration + 's');

    // pause on hover & focus for accessibility
    track.addEventListener('mouseenter', () => { track.style.animationPlayState = 'paused'; });
    track.addEventListener('mouseleave', () => { track.style.animationPlayState = 'running'; });
    track.addEventListener('focusin', () => { track.style.animationPlayState = 'paused'; });
    track.addEventListener('focusout', () => { track.style.animationPlayState = 'running'; });

    // keyboard control: space toggles pause
    track.addEventListener('keydown', (ev) => {
      if (ev.key === ' ' || ev.key === 'Spacebar') {
        ev.preventDefault();
        const state = getComputedStyle(track).animationPlayState;
        track.style.animationPlayState = (state === 'running') ? 'paused' : 'running';
      }
    });

    // defensive: if images haven't loaded yet, adjust duration after load
    const imgs = track.querySelectorAll('img');
    let loaded = 0;
    if (imgs.length === 0) return;
    imgs.forEach(img => {
      if (img.complete) { loaded++; }
      else img.addEventListener('load', () => {
        loaded++;
        if (loaded === imgs.length) {
          // optionally you could recalc duration here if you want
        }
      });
    });
  });
})();

</script>

  <script>
/* Hero slider behaviour (autoplay, pause on hover, keyboard, highlight update) */
(function(){
  const slider = document.getElementById('heroSlider');
  if (!slider) return;
  const slides = Array.from(slider.querySelectorAll('.slide'));
  const dotsContainer = slider.querySelector('.slider-dots');
  const prevBtn = slider.querySelector('.slider-control.prev');
  const nextBtn = slider.querySelector('.slider-control.next');
  const highlight = document.getElementById('heroHighlight');
  const highlightTitle = document.getElementById('highlightTitle');
  const highlightPrice = document.getElementById('highlightPrice');
  const highlightBuy = document.getElementById('highlightBuy');

  // build dots
  slides.forEach((s, i) => {
    const btn = document.createElement('button');
    btn.setAttribute('aria-label', 'Go to slide ' + (i + 1));
    btn.dataset.index = i;
    btn.addEventListener('click', () => goTo(i));
    dotsContainer.appendChild(btn);
  });

  let current = 0;
  let timer = null;
  let playing = true;
  const INTERVAL = 5000;

  function activate(i) {
    slides.forEach((s, idx) => s.classList.toggle('active', idx === i));
    Array.from(dotsContainer.children).forEach((d, idx) => d.classList.toggle('active', idx === i));
    // update highlight from slide data-product
    const prodId = slides[i].dataset.product;
    if (prodId && window.MHC && Array.isArray(window.MHC.PRODUCTS)) {
      const p = window.MHC.PRODUCTS.find(x => x.id === prodId) || {};
      highlight.dataset.productId = prodId;
      highlight.querySelector('.highlight-thumb').src = p.img || highlight.querySelector('.highlight-thumb').src;
      highlightTitle.textContent = p.title || highlightTitle.textContent;
      highlightPrice.textContent = (typeof p.price !== 'undefined') ? ('$' + Number(p.price).toFixed(2)) : highlightPrice.textContent;
      // Buy button: attach event
      highlight.onclick = () => { if (p && p.id) window.MHC && window.MHC.addToCart && window.MHC.addToCart(p); };
      highlightBuy.onclick = (ev) => { ev.stopPropagation(); if (p && p.id) window.MHC && window.MHC.addToCart && window.MHC.addToCart(p); };
    } else {
      // fallback: update dataset only
      highlight.dataset.productId = prodId || '';
    }
  }

  function goTo(i) {
    current = (i + slides.length) % slides.length;
    activate(current);
  }

  function next() { goTo(current + 1); }
  function prev() { goTo(current - 1); }

  // autoplay
  function start() {
    if (timer) clearInterval(timer);
    timer = setInterval(next, INTERVAL);
    playing = true;
  }
  function stop() {
    if (timer) clearInterval(timer);
    timer = null;
    playing = false;
  }

  // wire controls
  if (nextBtn) nextBtn.addEventListener('click', () => { next(); stop(); setTimeout(start, INTERVAL); });
  if (prevBtn) prevBtn.addEventListener('click', () => { prev(); stop(); setTimeout(start, INTERVAL); });

  // pause on hover/focus
  slider.addEventListener('mouseenter', stop);
  slider.addEventListener('mouseleave', () => { if (!playing) start(); });
  slider.addEventListener('focusin', stop);
  slider.addEventListener('focusout', () => { if (!playing) start(); });

  // keyboard accessibility: left/right
  slider.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') { prev(); stop(); setTimeout(start, INTERVAL); }
    if (e.key === 'ArrowRight') { next(); stop(); setTimeout(start, INTERVAL); }
  });

  // lazy-set background images if data-bg present (helps when you want different src)
  slides.forEach(s => {
    const bg = s.dataset.bg;
    const img = s.querySelector('img');
    if (bg && img && (!img.src || img.src.indexOf(bg) === -1)) {
      img.src = bg;
    }
  });

  // init
  goTo(0);
  start();

  // expose small API (optional)
  slider.heroGoTo = goTo;
})();
</script>

</html>
